# Channels

这部分是作为高频双端`Events`的代替品而出现的。

虽然说此处的难度不及`Events`，但其思想源于`Events`。

## Events的一个劣势

如果你遇到以下情况，还想用 `Events`，就会很难办：  
1. 两角色交互时存在大量的来回访问。此外，由于没有合适的命名规则，只能使用`~`。而且没有合适的交互方式的话会导致阻塞或者断路。  
2. 异步的情况下希望获得返回值。

`Channels` 可以解决第一点，和一部分第二点。

## 具体思想

由于实现方案没有 `Events` 复杂，我们可以直接探讨 `Channels` 的思想。

`Channels` 需要的：  
区分两个交互的角色为 `S` 和 `C` 。  
`S` 主要负责发布指令以及控制 `Channels` 运行，`C` 主要负责回复指令以及实际触发指令。

二者缺一不可。

由此，我们要新建两个变量`CHANNEL-S-[identifier]`和`CHANNEL-C-[identifier]`。（具体见[命名规则](../Basical%20Naming%20Rules/index.md)）

`Channels` 基础状态以及其他状态：  
1. `empty`，一般记为 `空` 或不填。主要用于表示不在运行中。  
2. `offline`，一般记为 `-`。主要用于表示运行中或停止接收。  
3. `over`，一般记为 `over`。主要用于表示已完成。
4. 其他，实现你自己的指令。

`Channels` 交互的大致步骤：  
1. `S` 发布 `指令A` 并等待 `指令A` 完成。  
2. `C` 接受 `指令A` 并运行。  
3. `C` 完成，返回内容。  
4. 返回1，或前往5。  
5. `S` 设置结束。`C` 随之结束。

`Channels` 需要注意的：  
1. `S` 端发布的内容需要有指定顺序，与 `C` 端想实现的内容相关。  
2. `C` 端可接收的内容，在未接收内容时无序，接收内容后有序。

具体实现：
...

[点此测试]()

## 大地图移动
前置：`ESB` 架构。

我们将探讨如何优雅而稳定地实现一个大地图移动。
其中，人物强制在格中移动（这会稍加适合我们的架构）。

### 移动

### 特殊地面

### NPC

## ...

...

## Multi-Channels 多重频道
这部分可能有一天会开发，但由于我主要使用双角色，大概用不上吧。
